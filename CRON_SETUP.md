# üïê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cron Job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Cron Job?

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ç–µ–Ω–¥–µ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ø–æ–¥–∞–Ω–æ" –∏ –µ—Å–ª–∏ –¥–µ–¥–ª–∞–π–Ω –ø–æ–¥–∞—á–∏ (`submission_deadline`) –Ω–∞—Å—Ç—É–ø–∏–ª –∏–ª–∏ –ø—Ä–æ—à—ë–ª, –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∏—Ö –≤ —Å—Ç–∞—Ç—É—Å "–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏".

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Vercel

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables –¥–æ–±–∞–≤—å:

```
CRON_SECRET=your-random-secret-key-here
```

**–ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á:**
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –ª—é–±—É—é —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞).

### 2. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç Cron

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç Cron Job –Ω–∞ –æ—Å–Ω–æ–≤–µ `vercel.json`:

```json
{
  "crons": [
    {
      "path": "/api/cron/check-deadlines",
      "schedule": "0 0 * * *"
    }
  ]
}
```

**Schedule:** `0 0 * * *` = –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC (03:00 –ø–æ –ú–æ—Å–∫–≤–µ)

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∞—ë—Ç —Ç–µ–Ω–¥–µ—Ä
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "–ø–æ–¥–∞–Ω–æ"
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `submission_date = —Å–µ–≥–æ–¥–Ω—è`
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω–æ–π
- –¢–µ–Ω–¥–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –≤–æ –≤–∫–ª–∞–¥–∫–µ "–ù–æ–≤—ã–µ"

### 2. –ù–∞—Å—Ç—É–ø–∞–µ—Ç –¥–µ–Ω—å –¥–µ–¥–ª–∞–π–Ω–∞
- Cron Job –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ 00:00 UTC
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ç–µ–Ω–¥–µ—Ä—ã: `status = '–ø–æ–¥–∞–Ω–æ' AND submission_deadline <= —Å–µ–≥–æ–¥–Ω—è`
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"
- –°–æ–∑–¥–∞—ë—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `reminders`)

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –¢–µ–Ω–¥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤–æ –≤–∫–ª–∞–¥–∫—É "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å Cron Job:

```bash
curl -X GET "https://your-app.vercel.app/api/cron/check-deadlines" \
  -H "Authorization: Bearer YOUR_CRON_SECRET"
```

### –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "message": "–û–±–Ω–æ–≤–ª–µ–Ω–æ 3 –∏–∑ 3 —Ç–µ–Ω–¥–µ—Ä–æ–≤",
  "results": [
    { "id": 1, "success": true, "name": "–†–µ–º–æ–Ω—Ç –¥–æ—Ä–æ–≥–∏" },
    { "id": 2, "success": true, "name": "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è" },
    { "id": 3, "success": true, "name": "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –º–æ—Å—Ç–∞" }
  ],
  "count": 3
}
```

---

## –õ–æ–≥–∏ –≤ Vercel

–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Cron Job:

1. Vercel Dashboard ‚Üí Project ‚Üí Deployments
2. –í—ã–±–µ—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. Functions ‚Üí `/api/cron/check-deadlines`
4. –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

–ï—Å–ª–∏ Vercel Cron –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω), –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```typescript
// –í app/m/tenders/page.tsx –∏–ª–∏ app/(dashboard)/tenders/page.tsx

useEffect(() => {
  checkDeadlines();
  loadTenders();
}, []);

const checkDeadlines = async () => {
  const today = new Date().toISOString().split('T')[0];
  
  const expiredTenders = tenders.filter(t => 
    t.status === '–ø–æ–¥–∞–Ω–æ' && 
    t.submission_deadline && 
    t.submission_deadline <= today
  );
  
  for (const tender of expiredTenders) {
    await apiClient.updateTender(tender.id, { 
      status: '–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏' 
    });
  }
};
```

**–ú–∏–Ω—É—Å—ã:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É.

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Endpoint `/api/cron/check-deadlines` –∑–∞—â–∏—â—ë–Ω —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
- –¢–æ–ª—å–∫–æ Vercel Cron –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —ç—Ç–æ—Ç endpoint
- –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ `Authorization` header –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω—ë–Ω

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —Ç–µ–Ω–¥–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ "–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏" –≤ –¥–µ–Ω—å –¥–µ–¥–ª–∞–π–Ω–∞. üéØ
