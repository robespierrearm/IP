# üõ†Ô∏è Utility Scripts

–ù–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ TenderCRM.

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. **check-user.ts** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

```bash
npx tsx scripts/check-user.ts
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üîí –¢–∏–ø –ø–∞—Ä–æ–ª—è (bcrypt –∏–ª–∏ plain text)
- ‚úÖ/‚ùå –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Email: `admin@example.com`
- –ü–∞—Ä–æ–ª—å: `admin123`

---

### 2. **activate-user.ts** - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```bash
npx tsx scripts/activate-user.ts <email>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
npx tsx scripts/activate-user.ts user@example.com
```

---

### 3. **reset-password.ts** - –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

–ú–µ–Ω—è–µ—Ç –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ–≥–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç.

```bash
npx tsx scripts/reset-password.ts <email> <–Ω–æ–≤—ã–π-–ø–∞—Ä–æ–ª—å>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
npx tsx scripts/reset-password.ts user@example.com newpassword123
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ bcrypt

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
npx tsx scripts/check-user.ts
```

**–®–∞–≥ 2:** –ï—Å–ª–∏ –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω:
```bash
npx tsx scripts/activate-user.ts your@email.com
```

**–®–∞–≥ 3:** –ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å:
```bash
npx tsx scripts/reset-password.ts your@email.com newpassword
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
npx tsx scripts/check-user.ts

# 2. –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ
# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ Supabase Dashboard

# 3. –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å –Ω–∞ –Ω—É–∂–Ω—ã–π
npx tsx scripts/reset-password.ts admin@example.com mypassword123
```

### –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ—Ö –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
```bash
# –°–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏–º —Å–ø–∏—Å–æ–∫
npx tsx scripts/check-user.ts

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–∞–∂–¥–æ–≥–æ
npx tsx scripts/activate-user.ts user1@example.com
npx tsx scripts/activate-user.ts user2@example.com
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```bash
# –ü–∞—Ä–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è
npx tsx scripts/reset-password.ts user@example.com password123
```

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```sql
-- –ù–ï –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑—É!
INSERT INTO users (email, password) VALUES ('user@example.com', 'plaintext');
```

### is_active —Ñ–ª–∞–≥

- `true` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ ‚úÖ
- `false` - –≤—Ö–æ–¥ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚ùå

API login –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: `.eq('is_active', true)`

---

## üîç Troubleshooting

### "User not found"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—á–Ω—ã–π email
npx tsx scripts/check-user.ts

# Email —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–µ—á–∞—Ç–∫–∏
```

### "Error connecting to database"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env.local:
echo $NEXT_PUBLIC_SUPABASE_URL
echo $NEXT_PUBLIC_SUPABASE_ANON_KEY

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Supabase –ø—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω
```

### "Permission denied"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Row Level Security –≤ Supabase
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è anon key
```

---

## üìä –í—ã–≤–æ–¥ check-user.ts

```
üîç –ü–†–û–í–ï–†–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô –í –ë–ê–ó–ï

============================================================

‚úÖ –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 2

1. admin@example.com
   Username: Admin
   –ü–∞—Ä–æ–ª—å: üîí bcrypt
   –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
   ID: 1

2. user@example.com
   Username: User
   –ü–∞—Ä–æ–ª—å: ‚ö†Ô∏è  plain text
   –ê–∫—Ç–∏–≤–µ–Ω: ‚ùå
   ID: 2
   ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ü–∞—Ä–æ–ª—å –ù–ï –∑–∞—Ö–µ—à–∏—Ä–æ–≤–∞–Ω!
   –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å: "test123"

============================================================

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

‚ö†Ô∏è  –£ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï –∑–∞—Ö–µ—à–∏—Ä–æ–≤–∞–Ω –ø–∞—Ä–æ–ª—å!
   –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–∞—Ä–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ö–µ—à–∏—Ä—É–µ—Ç—Å—è.

üìù –î–ª—è –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   Email: user@example.com
   –ü–∞—Ä–æ–ª—å: test123

‚ö†Ô∏è  –ù–ï–ê–ö–¢–ò–í–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò:
   - user@example.com (ID: 2)
   –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   npx tsx scripts/activate-user.ts user@example.com
```

---

## üéØ Use Cases

### 1. –ü–µ—Ä–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
npx tsx scripts/check-user.ts
# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç - —Å–æ–∑–¥–∞—Å—Ç—Å—è admin@example.com / admin123
```

### 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±—ã–ª –ø–∞—Ä–æ–ª—å
```bash
npx tsx scripts/reset-password.ts user@example.com newpass123
```

### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
```bash
npx tsx scripts/activate-user.ts user@example.com
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
```bash
npx tsx scripts/check-user.ts
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω—ã
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∞–¥–º–∏–Ω –∞–∫—Ç–∏–≤–µ–Ω
```

---

**Created:** 2025-10-26  
**Status:** Production Ready ‚úÖ
