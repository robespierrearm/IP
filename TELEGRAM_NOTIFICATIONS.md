# üì± Telegram –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - –ü–æ–ª–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:

### **1. üìã –ù–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä**
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–µ–Ω–¥–µ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º—É
- **–ö–æ–¥:** `notifyNewTender()` –≤ `lib/telegram-notifications.ts`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:** –í `app/(dashboard)/tenders/page.tsx` ‚Üí `handleAddTender()`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –ì–∞–ª–æ—á–∫–∞ `notify_new_tender`

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
üìã –ù–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω!

‚úÖ –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —à–∫–æ–ª—ã ‚Ññ15

üìù –ù–æ–º–µ—Ä: 0123456789
üìç –†–µ–≥–∏–æ–Ω: –ú–æ—Å–∫–≤–∞
üí∞ –¶–µ–Ω–∞: 5 000 000 ‚ÇΩ
‚è∞ –î–µ–¥–ª–∞–π–Ω: 15.11.2024

[üåê –û—Ç–∫—Ä—ã—Ç—å –≤ CRM]
```

---

### **2. üéâ –ü–æ–±–µ–¥–∞**
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–Ω–¥–µ—Ä–∞ –Ω–∞ "–ü–æ–±–µ–¥–∞"
- **–ö–æ–¥:** `notifyTenderWon()` –≤ `lib/telegram-notifications.ts`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:** –ß–µ—Ä–µ–∑ `notifyStatusChange()` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –ì–∞–ª–æ—á–∫–∞ `notify_won`

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
üéâ –ü–û–ë–ï–î–ê –í –¢–ï–ù–î–ï–†–ï!

‚úÖ –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —à–∫–æ–ª—ã ‚Ññ15

üí∞ –°—É–º–º–∞: 5 000 000 ‚ÇΩ

[üåê –û—Ç–∫—Ä—ã—Ç—å –≤ CRM]
```

---

### **3. üòî –ü—Ä–æ–∏–≥—Ä—ã—à**
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–Ω–¥–µ—Ä–∞ –Ω–∞ "–ü—Ä–æ–∏–≥—Ä—ã—à"
- **–ö–æ–¥:** `notifyTenderLost()` –≤ `lib/telegram-notifications.ts`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:** –ß–µ—Ä–µ–∑ `notifyStatusChange()` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –ì–∞–ª–æ—á–∫–∞ `notify_lost`

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
üòî –ü—Ä–æ–∏–≥—Ä—ã—à –≤ —Ç–µ–Ω–¥–µ—Ä–µ

–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —à–∫–æ–ª—ã ‚Ññ15

–ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ—Å—å, –≤–ø–µ—Ä–µ–¥–∏ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏!
```

---

### **4. üîÑ –î—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**
- **–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π (–∫—Ä–æ–º–µ –ü–æ–±–µ–¥–∞/–ü—Ä–æ–∏–≥—Ä—ã—à)
- **–ö–æ–¥:** `notifyStatusChange()` –≤ `lib/telegram-notifications.ts`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è:** –í `app/(dashboard)/tenders/page.tsx` ‚Üí `handleUpdateTender()`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –ì–∞–ª–æ—á–∫–∞ `notify_status_change`

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–Ω–¥–µ—Ä–∞

–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —à–∫–æ–ª—ã ‚Ññ15

–ë—ã–ª–æ: –Ω–æ–≤—ã–π
–°—Ç–∞–ª–æ: –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏
```

---

## üéØ –õ–û–ì–ò–ö–ê –ü–†–ò–û–†–ò–¢–ï–¢–û–í:

```javascript
–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ–Ω–¥–µ—Ä–∞:

1. –ï—Å—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª–∏?
   ‚Üí –ù–µ—Ç ‚Üí –í—ã—Ö–æ–¥
   
2. –°—Ç–∞—Ç—É—Å = "–ü–æ–±–µ–¥–∞" –ò –≥–∞–ª–æ—á–∫–∞ "–ü–æ–±–µ–¥–∞" –í–ö–õ?
   ‚Üí –î–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ü–û–ë–ï–î–£ –∏ –≤—ã—Ö–æ–¥
   
3. –°—Ç–∞—Ç—É—Å = "–ü—Ä–æ–∏–≥—Ä—ã—à" –ò –≥–∞–ª–æ—á–∫–∞ "–ü—Ä–æ–∏–≥—Ä—ã—à" –í–ö–õ?
   ‚Üí –î–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ò–ì–†–´–® –∏ –≤—ã—Ö–æ–¥
   
4. –ì–∞–ª–æ—á–∫–∞ "–î—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è" –í–ö–õ?
   ‚Üí –î–∞ ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ò–ó–ú–ï–ù–ï–ù–ò–ï
   ‚Üí –ù–µ—Ç ‚Üí –í—ã—Ö–æ–¥
```

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ë–î:

### **–¢–∞–±–ª–∏—Ü–∞: `telegram_notification_settings`**
```sql
id                      SERIAL PRIMARY KEY
recipients              TEXT[]              -- –º–∞—Å—Å–∏–≤ telegram_id
notify_new_tender       BOOLEAN             -- ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
notify_won              BOOLEAN             -- ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
notify_lost             BOOLEAN             -- ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
notify_status_change    BOOLEAN             -- ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
created_at              TIMESTAMP
updated_at              TIMESTAMP
```

---

## üîß –§–ê–ô–õ–´ –°–ò–°–¢–ï–ú–´:

### **1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
`components/TelegramNotifications.tsx`
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –ì–∞–ª–æ—á–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

### **2. –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏:**
`lib/telegram-notifications.ts`
- `notifyNewTender()` - –Ω–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä
- `notifyTenderWon()` - –ø–æ–±–µ–¥–∞
- `notifyTenderLost()` - –ø—Ä–æ–∏–≥—Ä—ã—à
- `notifyStatusChange()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### **3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
`app/(dashboard)/tenders/page.tsx`
- `handleAddTender()` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `notifyNewTender()`
- `handleUpdateTender()` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `notifyStatusChange()`

### **4. –ê–¥–º–∏–Ω–∫–∞:**
`app/(dashboard)/admin/page.tsx`
- –í–∫–ª–∞–¥–∫–∞ "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
- –†–µ–Ω–¥–µ—Ä–∏—Ç `TelegramNotifications`

---

## üß™ –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### **–¢–µ—Å—Ç 1: –ù–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä**
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –í–∫–ª—é—á–∏—Ç—å "–ù–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä"
2. –í—ã–±—Ä–∞—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–Ω–¥–µ—Ä –≤ —Å–∏—Å—Ç–µ–º—É
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏

### **–¢–µ—Å—Ç 2: –ü–æ–±–µ–¥–∞**
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –í–∫–ª—é—á–∏—Ç—å "–ü–æ–±–µ–¥–∞"
2. –û—Ç–∫—Ä—ã—Ç—å —Ç–µ–Ω–¥–µ—Ä ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
3. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–ü–æ–±–µ–¥–∞"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏

### **–¢–µ—Å—Ç 3: –ü—Ä–æ–∏–≥—Ä—ã—à**
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –í–∫–ª—é—á–∏—Ç—å "–ü—Ä–æ–∏–≥—Ä—ã—à"
2. –û—Ç–∫—Ä—ã—Ç—å —Ç–µ–Ω–¥–µ—Ä ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
3. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–ü—Ä–æ–∏–≥—Ä—ã—à"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–æ–∏–≥—Ä—ã—à–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏

### **–¢–µ—Å—Ç 4: –î—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**
1. –ê–¥–º–∏–Ω–∫–∞ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –í–∫–ª—é—á–∏—Ç—å "–î—Ä—É–≥–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
2. –û—Ç–∫—Ä—ã—Ç—å —Ç–µ–Ω–¥–µ—Ä ‚Üí –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
3. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–í —Ä–∞–±–æ—Ç–µ"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏

---

## ‚ùå –ß–¢–û –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### **–î–µ–¥–ª–∞–π–Ω—ã (–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)**
- ‚è∞ –î–µ–¥–ª–∞–π–Ω —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ - **–ù–ï –†–ê–ë–û–¢–ê–ï–¢**
- –¢—Ä–µ–±—É–µ—Ç cron job –∏–ª–∏ scheduled —Ñ—É–Ω–∫—Ü–∏–∏
- –ù–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é

---

## üîç –û–¢–õ–ê–î–ö–ê:

### **–õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```javascript
// –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
üíæ –°–æ—Ö—Ä–∞–Ω—è—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: {...}
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: [...]

// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
üìù –ù–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ—Ç, —Å–æ–∑–¥–∞—é...
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–∑–¥–∞–Ω—ã: {...}

// –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º —Ç–µ–Ω–¥–µ—Ä–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–±–µ–¥–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê:

- ‚úÖ –í—ã–±–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- ‚úÖ –ù–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –ü–æ–±–µ–¥–∞ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–æ–∏–≥—Ä—ã—à ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç–º–æ–¥–∑–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –≤ CRM"
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
- ‚ùå –î–µ–¥–ª–∞–π–Ω—ã (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚ùå –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚ùå –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ü–µ–Ω–µ/—Ä–µ–≥–∏–æ–Ω—É (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

---

**–í–°–Å –ß–¢–û –í –ò–ù–¢–ï–†–§–ï–ô–°–ï - –†–ê–ë–û–¢–ê–ï–¢! ‚úÖ**
